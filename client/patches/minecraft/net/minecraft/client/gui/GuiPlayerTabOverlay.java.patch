--- ../src-base/minecraft/net/minecraft/client/gui/GuiPlayerTabOverlay.java
+++ ../src-work/minecraft/net/minecraft/client/gui/GuiPlayerTabOverlay.java
@@ -1,10 +1,15 @@
 package net.minecraft.client.gui;
 
+import java.util.Comparator;
+import java.util.List;
+
 import com.google.common.collect.ComparisonChain;
 import com.google.common.collect.Ordering;
 import com.mojang.authlib.GameProfile;
-import java.util.Comparator;
-import java.util.List;
+
+import net.mattbenson.Wrapper;
+import net.mattbenson.network.network.packets.misc.UserList;
+import net.mattbenson.utils.AssetUtils;
 import net.minecraft.client.Minecraft;
 import net.minecraft.client.network.NetHandlerPlayClient;
 import net.minecraft.client.network.NetworkPlayerInfo;
@@ -18,11 +23,9 @@
 import net.minecraft.util.EnumChatFormatting;
 import net.minecraft.util.IChatComponent;
 import net.minecraft.util.MathHelper;
+import net.minecraft.util.ResourceLocation;
 import net.minecraft.world.WorldSettings;
-import net.minecraftforge.fml.relauncher.Side;
-import net.minecraftforge.fml.relauncher.SideOnly;
 
-@SideOnly(Side.CLIENT)
 public class GuiPlayerTabOverlay extends Gui
 {
     private static final Ordering<NetworkPlayerInfo> field_175252_a = Ordering.from(new GuiPlayerTabOverlay.PlayerComparator());
@@ -30,7 +33,14 @@
     private final GuiIngame field_175251_g;
     private IChatComponent field_175255_h;
     private IChatComponent field_175256_i;
+    public static final ResourceLocation FALCUNLOGO = AssetUtils.getResource("falcun/falcunwings.png");
+    
+    /**
+     * The last time the playerlist was opened (went from not being renderd, to being rendered)
+     */
     private long field_175253_j;
+
+    /** Weither or not the playerlist is currently being rendered */
     private boolean field_175254_k;
 
     public GuiPlayerTabOverlay(Minecraft p_i45529_1_, GuiIngame p_i45529_2_)
@@ -39,11 +49,20 @@
         this.field_175251_g = p_i45529_2_;
     }
 
+    /**
+     * Returns the name that should be renderd for the player supplied
+     */
     public String func_175243_a(NetworkPlayerInfo p_175243_1_)
     {
         return p_175243_1_.func_178854_k() != null ? p_175243_1_.func_178854_k().func_150254_d() : ScorePlayerTeam.func_96667_a(p_175243_1_.func_178850_i(), p_175243_1_.func_178845_a().getName());
     }
 
+    /**
+     * Called by GuiIngame to update the information stored in the playerlist, does not actually render the list,
+     * however.
+     *  
+     * @param willBeRendered True if the playerlist is intended to be renderd subsequently.
+     */
     public void func_175246_a(boolean p_175246_1_)
     {
         if (p_175246_1_ && !this.field_175254_k)
@@ -54,173 +73,180 @@
         this.field_175254_k = p_175246_1_;
     }
 
-    public void func_175249_a(int p_175249_1_, Scoreboard p_175249_2_, ScoreObjective p_175249_3_)
-    {
-        NetHandlerPlayClient nethandlerplayclient = this.field_175250_f.field_71439_g.field_71174_a;
-        List<NetworkPlayerInfo> list = field_175252_a.<NetworkPlayerInfo>sortedCopy(nethandlerplayclient.func_175106_d());
-        int i = 0;
-        int j = 0;
+    /**
+     * Renders the playerlist, its background, headers and footers.
+     */
+	public void func_175249_a(int p_175249_1_, Scoreboard p_175249_2_, ScoreObjective p_175249_3_) {
+		NetHandlerPlayClient nethandlerplayclient = this.field_175250_f.field_71439_g.field_71174_a;
+		List<NetworkPlayerInfo> list = field_175252_a.<NetworkPlayerInfo>sortedCopy(nethandlerplayclient.func_175106_d());
+		if (Wrapper.getInstance().isSortTab()) {
+			list.sort(new Comparator<NetworkPlayerInfo>() {
 
-        for (NetworkPlayerInfo networkplayerinfo : list)
-        {
-            int k = this.field_175250_f.field_71466_p.func_78256_a(this.func_175243_a(networkplayerinfo));
-            i = Math.max(i, k);
+				@Override
+				public int compare(NetworkPlayerInfo o1, NetworkPlayerInfo o2) {
+					boolean b1 = UserList.usesFalcun(o1.func_178845_a().getId());
+					boolean b2 = UserList.usesFalcun(o2.func_178845_a().getId());
 
-            if (p_175249_3_ != null && p_175249_3_.func_178766_e() != IScoreObjectiveCriteria.EnumRenderType.HEARTS)
-            {
-                k = this.field_175250_f.field_71466_p.func_78256_a(" " + p_175249_2_.func_96529_a(networkplayerinfo.func_178845_a().getName(), p_175249_3_).func_96652_c());
-                j = Math.max(j, k);
-            }
-        }
+					return (b1 != b2) ? (b1) ? -1 : 1 : 0;
+				}
 
-        list = list.subList(0, Math.min(list.size(), 80));
-        int l3 = list.size();
-        int i4 = l3;
-        int j4;
+			});
+		}
 
-        for (j4 = 1; i4 > 20; i4 = (l3 + j4 - 1) / j4)
-        {
-            ++j4;
-        }
+		int i = 0;
+		int j = 0;
 
-        boolean flag = this.field_175250_f.func_71387_A() || this.field_175250_f.func_147114_u().func_147298_b().func_179292_f();
-        int l;
+		for (NetworkPlayerInfo networkplayerinfo : list) {
+			int k = this.field_175250_f.field_71466_p.func_78256_a(this.func_175243_a(networkplayerinfo));
+			i = Math.max(i, k);
 
-        if (p_175249_3_ != null)
-        {
-            if (p_175249_3_.func_178766_e() == IScoreObjectiveCriteria.EnumRenderType.HEARTS)
-            {
-                l = 90;
-            }
-            else
-            {
-                l = j;
-            }
-        }
-        else
-        {
-            l = 0;
-        }
+			if (p_175249_3_ != null
+					&& p_175249_3_.func_178766_e() != IScoreObjectiveCriteria.EnumRenderType.HEARTS) {
+				k = this.field_175250_f.field_71466_p.func_78256_a(" " + p_175249_2_
+						.func_96529_a(networkplayerinfo.func_178845_a().getName(), p_175249_3_)
+						.func_96652_c());
+				j = Math.max(j, k);
+			}
+		}
 
-        int i1 = Math.min(j4 * ((flag ? 9 : 0) + i + l + 13), p_175249_1_ - 50) / j4;
-        int j1 = p_175249_1_ / 2 - (i1 * j4 + (j4 - 1) * 5) / 2;
-        int k1 = 10;
-        int l1 = i1 * j4 + (j4 - 1) * 5;
-        List<String> list1 = null;
-        List<String> list2 = null;
+		list = list.subList(0, Math.min(list.size(), 80));
+		int l3 = list.size();
+		int i4 = l3;
+		int j4;
 
-        if (this.field_175256_i != null)
-        {
-            list1 = this.field_175250_f.field_71466_p.func_78271_c(this.field_175256_i.func_150254_d(), p_175249_1_ - 50);
+		for (j4 = 1; i4 > 20; i4 = (l3 + j4 - 1) / j4) {
+			++j4;
+		}
 
-            for (String s : list1)
-            {
-                l1 = Math.max(l1, this.field_175250_f.field_71466_p.func_78256_a(s));
-            }
-        }
+		boolean flag = this.field_175250_f.func_71387_A()
+				|| this.field_175250_f.func_147114_u().func_147298_b().func_179292_f();
+		int l;
 
-        if (this.field_175255_h != null)
-        {
-            list2 = this.field_175250_f.field_71466_p.func_78271_c(this.field_175255_h.func_150254_d(), p_175249_1_ - 50);
+		if (p_175249_3_ != null) {
+			if (p_175249_3_.func_178766_e() == IScoreObjectiveCriteria.EnumRenderType.HEARTS) {
+				l = 90;
+			} else {
+				l = j;
+			}
+		} else {
+			l = 0;
+		}
 
-            for (String s2 : list2)
-            {
-                l1 = Math.max(l1, this.field_175250_f.field_71466_p.func_78256_a(s2));
-            }
-        }
+		int i1 = Math.min(j4 * ((flag ? 9 : 0) + i + l + 13), p_175249_1_ - 50) / j4;
+		int j1 = p_175249_1_ / 2 - (i1 * j4 + (j4 - 1) * 5) / 2;
+		int k1 = 10;
+		int l1 = i1 * j4 + (j4 - 1) * 5;
+		List<String> list1 = null;
+		List<String> list2 = null;
 
-        if (list1 != null)
-        {
-            func_73734_a(p_175249_1_ / 2 - l1 / 2 - 1, k1 - 1, p_175249_1_ / 2 + l1 / 2 + 1, k1 + list1.size() * this.field_175250_f.field_71466_p.field_78288_b, Integer.MIN_VALUE);
+		if (this.field_175256_i != null) {
+			list1 = this.field_175250_f.field_71466_p.func_78271_c(this.field_175256_i.func_150254_d(), p_175249_1_ - 50);
 
-            for (String s3 : list1)
-            {
-                int i2 = this.field_175250_f.field_71466_p.func_78256_a(s3);
-                this.field_175250_f.field_71466_p.func_175063_a(s3, (float)(p_175249_1_ / 2 - i2 / 2), (float)k1, -1);
-                k1 += this.field_175250_f.field_71466_p.field_78288_b;
-            }
+			for (String s : list1) {
+				l1 = Math.max(l1, this.field_175250_f.field_71466_p.func_78256_a(s));
+			}
+		}
 
-            ++k1;
-        }
+		if (this.field_175255_h != null) {
+			list2 = this.field_175250_f.field_71466_p.func_78271_c(this.field_175255_h.func_150254_d(), p_175249_1_ - 50);
 
-        func_73734_a(p_175249_1_ / 2 - l1 / 2 - 1, k1 - 1, p_175249_1_ / 2 + l1 / 2 + 1, k1 + i4 * 9, Integer.MIN_VALUE);
+			for (String s2 : list2) {
+				l1 = Math.max(l1, this.field_175250_f.field_71466_p.func_78256_a(s2));
+			}
+		}
 
-        for (int k4 = 0; k4 < l3; ++k4)
-        {
-            int l4 = k4 / i4;
-            int i5 = k4 % i4;
-            int j2 = j1 + l4 * i1 + l4 * 5;
-            int k2 = k1 + i5 * 9;
-            func_73734_a(j2, k2, j2 + i1, k2 + 8, 553648127);
-            GlStateManager.func_179131_c(1.0F, 1.0F, 1.0F, 1.0F);
-            GlStateManager.func_179141_d();
-            GlStateManager.func_179147_l();
-            GlStateManager.func_179120_a(770, 771, 1, 0);
+		if (list1 != null) {
+			drawRectangle(p_175249_1_ / 2 - l1 / 2 - 1, k1 - 1, p_175249_1_ / 2 + l1 / 2 + 1,
+					k1 + list1.size() * this.field_175250_f.field_71466_p.field_78288_b, Integer.MIN_VALUE);
 
-            if (k4 < list.size())
-            {
-                NetworkPlayerInfo networkplayerinfo1 = (NetworkPlayerInfo)list.get(k4);
-                String s1 = this.func_175243_a(networkplayerinfo1);
-                GameProfile gameprofile = networkplayerinfo1.func_178845_a();
+			for (String s3 : list1) {
+				int i2 = this.field_175250_f.field_71466_p.func_78256_a(s3);
+				this.field_175250_f.field_71466_p.func_175063_a(s3, (float) (p_175249_1_ / 2 - i2 / 2), (float) k1, -1);
+				k1 += this.field_175250_f.field_71466_p.field_78288_b;
+			}
 
-                if (flag)
-                {
-                    EntityPlayer entityplayer = this.field_175250_f.field_71441_e.func_152378_a(gameprofile.getId());
-                    boolean flag1 = entityplayer != null && entityplayer.func_175148_a(EnumPlayerModelParts.CAPE) && (gameprofile.getName().equals("Dinnerbone") || gameprofile.getName().equals("Grumm"));
-                    this.field_175250_f.func_110434_K().func_110577_a(networkplayerinfo1.func_178837_g());
-                    int l2 = 8 + (flag1 ? 8 : 0);
-                    int i3 = 8 * (flag1 ? -1 : 1);
-                    Gui.func_152125_a(j2, k2, 8.0F, (float)l2, 8, i3, 8, 8, 64.0F, 64.0F);
+			++k1;
+		}
 
-                    if (entityplayer != null && entityplayer.func_175148_a(EnumPlayerModelParts.HAT))
-                    {
-                        int j3 = 8 + (flag1 ? 8 : 0);
-                        int k3 = 8 * (flag1 ? -1 : 1);
-                        Gui.func_152125_a(j2, k2, 40.0F, (float)j3, 8, k3, 8, 8, 64.0F, 64.0F);
-                    }
+		drawRectangle(p_175249_1_ / 2 - l1 / 2 - 1, k1 - 1, p_175249_1_ / 2 + l1 / 2 + 1, k1 + i4 * 9, Integer.MIN_VALUE);
 
-                    j2 += 9;
-                }
+		for (int k4 = 0; k4 < l3; ++k4) {
+			int l4 = k4 / i4;
+			int i5 = k4 % i4;
+			int j2 = j1 + l4 * i1 + l4 * 5;
+			int k2 = k1 + i5 * 9;
+			drawRectangle(j2, k2, j2 + i1, k2 + 8, 553648127);
+			GlStateManager.func_179131_c(1.0F, 1.0F, 1.0F, 1.0F);
+			GlStateManager.func_179141_d();
+			GlStateManager.func_179147_l();
+			GlStateManager.func_179120_a(770, 771, 1, 0);
 
-                if (networkplayerinfo1.func_178848_b() == WorldSettings.GameType.SPECTATOR)
-                {
-                    s1 = EnumChatFormatting.ITALIC + s1;
-                    this.field_175250_f.field_71466_p.func_175063_a(s1, (float)j2, (float)k2, -1862270977);
-                }
-                else
-                {
-                    this.field_175250_f.field_71466_p.func_175063_a(s1, (float)j2, (float)k2, -1);
-                }
+			if (k4 < list.size()) {
+				NetworkPlayerInfo networkplayerinfo1 = (NetworkPlayerInfo) list.get(k4);
+				String s1 = this.func_175243_a(networkplayerinfo1);
+				GameProfile gameprofile = networkplayerinfo1.func_178845_a();
 
-                if (p_175249_3_ != null && networkplayerinfo1.func_178848_b() != WorldSettings.GameType.SPECTATOR)
-                {
-                    int k5 = j2 + i + 1;
-                    int l5 = k5 + l;
+				boolean renderLogo = UserList.usesFalcun(networkplayerinfo1.func_178845_a().getId())
+						&& Wrapper.getInstance().isShowLogo();
 
-                    if (l5 - k5 > 5)
-                    {
-                        this.func_175247_a(p_175249_3_, k2, gameprofile.getName(), k5, l5, networkplayerinfo1);
-                    }
-                }
+				if (flag) {
+					EntityPlayer entityplayer = this.field_175250_f.field_71441_e.func_152378_a(gameprofile.getId());
+					boolean flag1 = entityplayer != null && entityplayer.func_175148_a(EnumPlayerModelParts.CAPE)
+							&& (gameprofile.getName().equals("Dinnerbone") || gameprofile.getName().equals("Grumm"));
+					this.field_175250_f.func_110434_K().func_110577_a(networkplayerinfo1.func_178837_g());
+					int l2 = 8 + (flag1 ? 8 : 0);
+					int i3 = 8 * (flag1 ? -1 : 1);
+					Gui.func_152125_a(j2, k2, 8.0F, (float) l2, 8, i3, 8, 8, 64.0F, 64.0F);
 
-                this.func_175245_a(i1, j2 - (flag ? 9 : 0), k2, networkplayerinfo1);
-            }
-        }
+					if (entityplayer != null && entityplayer.func_175148_a(EnumPlayerModelParts.HAT)) {
+						int j3 = 8 + (flag1 ? 8 : 0);
+						int k3 = 8 * (flag1 ? -1 : 1);
+						Gui.func_152125_a(j2, k2, 40.0F, (float) j3, 8, k3, 8, 8, 64.0F, 64.0F);
+					}
 
-        if (list2 != null)
-        {
-            k1 = k1 + i4 * 9 + 1;
-            func_73734_a(p_175249_1_ / 2 - l1 / 2 - 1, k1 - 1, p_175249_1_ / 2 + l1 / 2 + 1, k1 + list2.size() * this.field_175250_f.field_71466_p.field_78288_b, Integer.MIN_VALUE);
+					j2 += 9;
+				}
 
-            for (String s4 : list2)
-            {
-                int j5 = this.field_175250_f.field_71466_p.func_78256_a(s4);
-                this.field_175250_f.field_71466_p.func_175063_a(s4, (float)(p_175249_1_ / 2 - j5 / 2), (float)k1, -1);
-                k1 += this.field_175250_f.field_71466_p.field_78288_b;
-            }
-        }
-    }
+				if (renderLogo) {
+					this.field_175250_f.func_110434_K().func_110577_a(FALCUNLOGO);
+					Gui.func_152125_a(j2 - 1, k2, 8.0F, (float) 8, 8, 8, 10, 8, 8.0F, 8.0F);
+				}
 
+				if (networkplayerinfo1.func_178848_b() == WorldSettings.GameType.SPECTATOR) {
+					s1 = EnumChatFormatting.ITALIC + s1;
+					this.field_175250_f.field_71466_p.func_175063_a(s1, (float) j2, (float) k2, -1862270977);
+				} else {
+					this.field_175250_f.field_71466_p.func_175063_a(s1, (float) j2 + (renderLogo ? 10 : 0), (float) k2,
+							-1);
+				}
+
+				if (p_175249_3_ != null && networkplayerinfo1.func_178848_b() != WorldSettings.GameType.SPECTATOR) {
+					int k5 = j2 + i + 1;
+					int l5 = k5 + l;
+
+					if (l5 - k5 > 5) {
+						this.func_175247_a(p_175249_3_, k2, gameprofile.getName(), k5, l5,
+								networkplayerinfo1);
+					}
+				}
+
+				this.func_175245_a(i1, j2 - (flag ? 9 : 0), k2, networkplayerinfo1);
+			}
+		}
+
+		if (list2 != null) {
+			k1 = k1 + i4 * 9 + 1;
+			drawRectangle(p_175249_1_ / 2 - l1 / 2 - 1, k1 - 1, p_175249_1_ / 2 + l1 / 2 + 1,
+					k1 + list2.size() * this.field_175250_f.field_71466_p.field_78288_b, Integer.MIN_VALUE);
+
+			for (String s4 : list2) {
+				int j5 = this.field_175250_f.field_71466_p.func_78256_a(s4);
+				this.field_175250_f.field_71466_p.func_175063_a(s4, (float) (p_175249_1_ / 2 - j5 / 2), (float) k1, -1);
+				k1 += this.field_175250_f.field_71466_p.field_78288_b;
+			}
+		}
+	}
+	
     protected void func_175245_a(int p_175245_1_, int p_175245_2_, int p_175245_3_, NetworkPlayerInfo p_175245_4_)
     {
         GlStateManager.func_179131_c(1.0F, 1.0F, 1.0F, 1.0F);
@@ -370,18 +396,17 @@
         this.field_175255_h = null;
     }
 
-    @SideOnly(Side.CLIENT)
     static class PlayerComparator implements Comparator<NetworkPlayerInfo>
+    {
+        private PlayerComparator()
         {
-            private PlayerComparator()
-            {
-            }
+        }
 
-            public int compare(NetworkPlayerInfo p_compare_1_, NetworkPlayerInfo p_compare_2_)
-            {
-                ScorePlayerTeam scoreplayerteam = p_compare_1_.func_178850_i();
-                ScorePlayerTeam scoreplayerteam1 = p_compare_2_.func_178850_i();
-                return ComparisonChain.start().compareTrueFirst(p_compare_1_.func_178848_b() != WorldSettings.GameType.SPECTATOR, p_compare_2_.func_178848_b() != WorldSettings.GameType.SPECTATOR).compare(scoreplayerteam != null ? scoreplayerteam.func_96661_b() : "", scoreplayerteam1 != null ? scoreplayerteam1.func_96661_b() : "").compare(p_compare_1_.func_178845_a().getName(), p_compare_2_.func_178845_a().getName()).result();
-            }
+        public int compare(NetworkPlayerInfo p_compare_1_, NetworkPlayerInfo p_compare_2_)
+        {
+            ScorePlayerTeam scoreplayerteam = p_compare_1_.func_178850_i();
+            ScorePlayerTeam scoreplayerteam1 = p_compare_2_.func_178850_i();
+            return ComparisonChain.start().compareTrueFirst(p_compare_1_.func_178848_b() != WorldSettings.GameType.SPECTATOR, p_compare_2_.func_178848_b() != WorldSettings.GameType.SPECTATOR).compare(scoreplayerteam != null ? scoreplayerteam.func_96661_b() : "", scoreplayerteam1 != null ? scoreplayerteam1.func_96661_b() : "").compare(p_compare_1_.func_178845_a().getName(), p_compare_2_.func_178845_a().getName()).result();
         }
+    }
 }
